<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>From HTML to Formly</title>
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="index.css"/>

</head>
<body ng-app="app" ng-controller="MainCtrl as vm">
<div class="jumbotron">
  <h1 ng-click="vm.showSecretStuff = !vm.showSecretStuff">
    From HTML to Formly
    <br/>
    <small>
      Bringing Jedi powers to forms (._.) ~ ︵ ┻━┻
    </small>
  </h1>
</div>
<div class="container ng-cloak">

  <div ng-if="vm.showSecretStuff">
    <h2>Super secret controls</h2>
    <button class="btn btn-info" ng-click="vm.autofill()">Auto fill</button>
    <button class="btn btn-danger" ng-click="vm.reset()">Reset form</button>
    <div class="checkbox">
      <label>
        <input type="checkbox" ng-model="vm.rememberInput" ng-change="vm.rememberInputChanged(vm.rememberInput)"/>
        Remember input on reload?
      </label>
    </div>
    <hr/>
  </div>

  <div>
    <h2>New and Improved Lightsaber order Form</h2>
    <form name="vm.userForm" ng-submit="vm.onSubmit(vm.user)">
      <formly-form model="vm.user" fields="vm.userFields">
        <button type="submit" class="btn btn-default" ng-disabled="vm.userForm.$invalid">Submit</button>
      </formly-form>
    </form>
  </div>

  <hr/>
  <div>
    <h2>Model</h2>
    <pre>{{vm.user | json}}</pre>
  </div>
  <div>
    <h2>Error state</h2>
    <pre>{{vm.userForm.$error | json}}</pre>
  </div>
</div>

<script src="node_modules/jquery/dist/jquery.js"></script>
<script src="node_modules/angular/angular.js"></script>
<script src="node_modules/angular-animate/angular-animate.js"></script>
<script src="node_modules/angular-messages/angular-messages.js"></script>
<script src="node_modules/angular-aria/angular-aria.js"></script>

<script src="node_modules/angular-formly/dist/formly.js"></script>
<script src="node_modules/angular-formly-templates-bootstrap/dist/angular-formly-templates-bootstrap.js"></script>

<script src="index.js"></script>

<script type="text/ng-template" id="custom-messages.html">
  <div class="my-messages" ng-messages="options.formControl.$error" ng-if="options.formControl.$touched">
    <div class="some-message" ng-message="required">This field is required</div>
    <div class="some-message" ng-message="minlength">Input too short</div>
    <div class="some-message" ng-message="email">This field must be an email</div>
    <div class="some-message" ng-message="matches">This field must match the other</div>
    <div class="some-message" ng-message="number">Must be a number</div>
    <div class="some-message" ng-message="{{::name}}" ng-repeat="(name, message) in ::options.validation.messages">
      {{message(options.formControl.$viewValue, options.formControl.$modelValue, this)}}
    </div>
  </div>
</script>
</body>
</html>
